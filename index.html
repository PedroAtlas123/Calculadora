<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Prestadores de Serviço</title>
    <link rel="stylesheet" href="style.css">

    <script>
        function calcularTotal() {
            let tipoContrato = document.getElementById("tipoContrato").value;
            let mensalidade = parseFloat(document.getElementById("mensalidade").value) || 0;
            let horaTecnica = parseFloat(document.getElementById("horaTecnica").value) || 0;
            let horasTrabalhadas = parseFloat(document.getElementById("horasTrabalhadas").value) || 0;
            let gfs = document.getElementById("gfs").value;
            let mentorCate = document.getElementById("mentorCate").checked;

            let dayoffSelecionados = [];
            document.querySelectorAll("input[name='dayoff']:checked").forEach((checkbox) => {
                dayoffSelecionados.push(checkbox.value);
            });

            let total = 0;

            if (tipoContrato === "Fixo") {
                total = mensalidade;
                // Se for venda de GFS, adiciona 50% da mensalidade
                if (gfs === "Venda") {
                    total += mensalidade / 2;
                }
            } else if (tipoContrato === "Variável") {
                total = horasTrabalhadas * horaTecnica;

                // Se GFS for "Venda", adicionar 80h * valor da hora técnica
                if (gfs === "Venda") {
                    total += 80 * horaTecnica;
                }

                // Dayoff (8h multiplicado pelo número de dias e valor da hora técnica)
                total += (dayoffSelecionados.length * 8 * horaTecnica);
            }

            // Adiciona 20% se Mentor CATe for selecionado
            if (mentorCate) {
                total *= 1.2;
            }

            let dadosFormulario = {
                tipoContrato,
                mensalidade: mensalidade.toFixed(2),
                horaTecnica: horaTecnica.toFixed(2),
                horasTrabalhadas,
                gfs,
                dayoff: dayoffSelecionados,
                mentorCate,
                total: total.toFixed(2)
            };

            localStorage.setItem("dadosFormulario", JSON.stringify(dadosFormulario));

            // Redireciona para a página da tabela
            window.location.href = "tabela.html";
        }

        function alternarCampos() {
            let tipoContrato = document.getElementById("tipoContrato").value;

            // Mostra/esconde campos com base no contrato selecionado
            document.getElementById("campoMensalidade").style.display = (tipoContrato === "Fixo") ? "block" : "none";
            document.getElementById("campoHoraTecnica").style.display = (tipoContrato === "Variável") ? "block" : "none";
            document.getElementById("campoHorasTrabalhadas").style.display = (tipoContrato === "Variável") ? "block" : "none";

            // Se for fixo, GFS não precisa ser selecionado
            document.getElementById("campoGFS").style.display = (tipoContrato === "Variável") ? "block" : "none";
        }
    </script>
</head>
<body onload="alternarCampos()">
    <h2>Calculadora de Prestadores de Serviço</h2>

    <label for="tipoContrato">Tipo de Contrato:</label>
    <select id="tipoContrato" onchange="alternarCampos()">
        <option value="Fixo">Fixo</option>
        <option value="Variável">Variável</option>
    </select>

    <br><br>

    <div id="campoMensalidade">
        <label for="mensalidade">Valor da Mensalidade (R$):</label>
        <input type="number" id="mensalidade" placeholder="Digite o valor">
    </div>

    <div id="campoHoraTecnica" style="display:none;">
        <label for="horaTecnica">Valor da Hora Técnica (R$):</label>
        <input type="number" id="horaTecnica" placeholder="Digite o valor">
    </div>

    <div id="campoHorasTrabalhadas" style="display:none;">
        <label for="horasTrabalhadas">Horas Trabalhadas:</label>
        <input type="number" id="horasTrabalhadas" placeholder="Digite as horas">
    </div>

    <br>

    <div id="campoGFS" style="display:none;">
        <label for="gfs">GFS:</label>
        <select id="gfs">
            <option value="Venda">Venda</option>
            <option value="Usufruto">Usufruto</option>
        </select>
    </div>

    <br>

    <label>Dayoff:</label><br>
    <input type="checkbox" name="dayoff" value="Paternidade"> Paternidade<br>
    <input type="checkbox" name="dayoff" value="Casamento"> Casamento<br>
    <input type="checkbox" name="dayoff" value="Aniversário"> Aniversário<br>
    <input type="checkbox" name="dayoff" value="Condolências"> Condolências<br>
    <input type="checkbox" name="dayoff" value="Feriado"> Feriado<br>
    <input type="checkbox" name="dayoff" value="Atestado"> Atestado<br>

    <br>

    <label for="mentorCate">Mentor CATe:</label>
    <input type="checkbox" id="mentorCate">

    <br><br>

    <button onclick="calcularTotal()">Calcular e Ver Tabela</button>
</body>
</html>

